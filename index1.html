<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AI Local Culture Guide</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #f97316; /* Changed to a warm orange for cultural vibrancy */
      --primary-dark: #ea580c;
      --primary-light: #fb923c;
      --primary-extra-light: #ffedd5;
      --secondary: #10b981;
      --light-bg: #f9fafb;
      --dark-bg: #1f2937;
      --text: #1e293b;
      --text-light: #64748b;
      --white: #ffffff;
      --border: #e2e8f0;
      --success: #10b981;
      --error: #ef4444;
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      --rounded-sm: 0.25rem;
      --rounded-md: 0.375rem;
      --rounded-lg: 0.5rem;
      --rounded-xl: 0.75rem;
      --rounded-2xl: 1rem;
      --rounded-full: 9999px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #fefce8, #fff7ed);
      color: var(--text);
      line-height: 1.5;
    }

    .page-container {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      padding: 1rem;
    }

    .chat-wrapper {
      flex-grow: 1;
      background-color: var(--white);
      width: 100%;
      max-width: 500px;
      height: 90vh;
      max-height: 800px;
      box-shadow: var(--shadow-xl);
      border-radius: var(--rounded-2xl);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      margin: auto;
      border: 1px solid var(--border);
      position: relative;
    }

    .chat-header {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: var(--white);
      padding: 1.25rem 1.5rem;
      font-size: 1.125rem;
      font-weight: 600;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
      position: relative;
    }

    .chat-header::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
    }

    .chat-icon {
      font-size: 1.25rem;
    }

    .chat-body {
      flex-grow: 1;
      padding: 1rem;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      background-color: var(--light-bg);
      background-image: 
        radial-gradient(var(--primary-extra-light) 1px, transparent 1px);
      background-size: 20px 20px;
    }

    .message {
      padding: 0.75rem 1rem;
      border-radius: var(--rounded-xl);
      max-width: 85%;
      line-height: 1.5;
      font-size: 0.9375rem;
      word-wrap: break-word;
      box-shadow: var(--shadow-sm);
      position: relative;
      animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .user {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: var(--white);
      align-self: flex-end;
      border-bottom-right-radius: var(--rounded-sm);
      margin-left: 15%;
    }

    .bot {
      background-color: var(--white);
      color: var(--text);
      align-self: flex-start;
      border: 1px solid var(--border);
      border-bottom-left-radius: var(--rounded-sm);
      margin-right: 15%;
    }

    .message-time {
      display: block;
      font-size: 0.6875rem;
      opacity: 0.7;
      margin-top: 0.25rem;
      text-align: right;
    }

    .chat-footer {
      display: flex;
      padding: 0.75rem;
      border-top: 1px solid var(--border);
      background-color: var(--white);
      position: relative;
    }

    .chat-footer::before {
      content: '';
      position: absolute;
      top: -1px;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--border), transparent);
    }

    .chat-footer input {
      flex-grow: 1;
      padding: 0.75rem 1rem;
      border-radius: var(--rounded-lg);
      border: 1px solid var(--border);
      font-size: 0.9375rem;
      transition: all 0.2s ease;
      background-color: var(--light-bg);
    }

    .chat-footer input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.2);
      background-color: var(--white);
    }

    .chat-footer button {
      margin-left: 0.5rem;
      padding: 0 1.25rem;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: var(--white);
      border: none;
      border-radius: var(--rounded-lg);
      cursor: pointer;
      font-weight: 500;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      box-shadow: var(--shadow-sm);
    }

    .chat-footer button:hover {
      background: linear-gradient(135deg, var(--primary-light), var(--primary));
      transform: translateY(-1px);
    }

    .chat-footer button:active {
      transform: translateY(0);
    }

    .chat-footer button i {
      font-size: 1rem;
    }

    .typing-indicator {
      display: flex;
      padding: 0.75rem 1rem;
      background-color: var(--white);
      border-radius: var(--rounded-xl);
      align-self: flex-start;
      border: 1px solid var(--border);
      margin-bottom: 0.75rem;
      box-shadow: var(--shadow-sm);
    }

    .typing-dot {
      width: 0.5rem;
      height: 0.5rem;
      background-color: var(--primary);
      border-radius: 50%;
      margin: 0 0.125rem;
      animation: typingAnimation 1.4s infinite ease-in-out;
    }

    .typing-dot:nth-child(1) { animation-delay: 0s; }
    .typing-dot:nth-child(2) { animation-delay: 0.2s; }
    .typing-dot:nth-child(3) { animation-delay: 0.4s; }

    @keyframes typingAnimation {
      0%, 60%, 100% { transform: translateY(0); opacity: 0.6; }
      30% { transform: translateY(-5px); opacity: 1; }
    }

    .welcome-message {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: var(--white);
      padding: 1.25rem;
      border-radius: var(--rounded-xl);
      margin-bottom: 1rem;
      box-shadow: var(--shadow-md);
      animation: fadeIn 0.5s ease-out;
    }

    .welcome-message h3 {
      font-size: 1.125rem;
      margin-bottom: 0.75rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .welcome-message p {
      font-size: 0.875rem;
      opacity: 0.9;
      margin-bottom: 0.75rem;
    }

    .suggested-questions {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      margin-top: 0.75rem;
    }

    .suggested-btn {
      background-color: rgba(255, 255, 255, 0.15);
      color: var(--white);
      border: none;
      border-radius: var(--rounded-md);
      padding: 0.5rem 0.75rem;
      font-size: 0.8125rem;
      cursor: pointer;
      text-align: left;
      transition: all 0.2s ease;
      backdrop-filter: blur(5px);
    }

    .suggested-btn:hover {
      background-color: rgba(255, 255, 255, 0.25);
      transform: translateX(2px);
    }

    .suggested-btn i {
      margin-right: 0.5rem;
      font-size: 0.75rem;
    }

    .app-footer {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: var(--white);
      text-align: center;
      padding: 0.75rem;
      font-size: 0.875rem;
      font-weight: 500;
      border-radius: var(--rounded-lg);
      margin-top: 1rem;
      box-shadow: var(--shadow-md);
    }

    .app-footer a {
      color: var(--white);
      text-decoration: none;
      font-weight: 600;
    }

    .app-footer a:hover {
      text-decoration: underline;
    }

    .message-actions {
      position: absolute;
      top: -0.75rem;
      right: 0.5rem;
      background: var(--white);
      border-radius: var(--rounded-full);
      box-shadow: var(--shadow-sm);
      display: flex;
      opacity: 0;
      transition: opacity 0.2s ease;
    }

    .message:hover .message-actions {
      opacity: 1;
    }

    .message-action-btn {
      width: 1.5rem;
      height: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background: var(--white);
      color: var(--text-light);
      border: none;
      cursor: pointer;
      font-size: 0.75rem;
      transition: all 0.2s ease;
    }

    .message-action-btn:hover {
      background: var(--primary-extra-light);
      color: var(--primary);
    }

    .copy-success {
      position: fixed;
      bottom: 1rem;
      left: 50%;
      transform: translateX(-50%);
      background-color: var(--success);
      color: var(--white);
      padding: 0.5rem 1rem;
      border-radius: var(--rounded-lg);
      font-size: 0.875rem;
      font-weight: 500;
      box-shadow: var(--shadow-md);
      z-index: 100;
      animation: slideUp 0.3s ease-out, fadeOut 0.3s ease-out 2s forwards;
      display: none;
    }

    @keyframes slideUp {
      from { opacity: 0; transform: translateX(-50%) translateY(20px); }
      to { opacity: 1; transform: translateX(-50%) translateY(0); }
    }

    @keyframes fadeOut {
      to { opacity: 0; }
    }

    @media (max-width: 600px) {
      .page-container {
        padding: 0;
      }
      
      .chat-wrapper {
        height: 100vh;
        max-height: none;
        border-radius: 0;
      }

      .message {
        max-width: 90%;
      }

      .app-footer {
        border-radius: 0;
      }
    }

    /* Scrollbar styling */
    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.05);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--primary-light);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--primary);
    }
  </style>
</head>
<body>
  <div class="page-container">
    <div class="chat-wrapper">
      <div class="chat-header">
        <i class="fas fa-globe-asia chat-icon"></i>
        AI Local Culture Guide
      </div>
      <div class="chat-body" id="chat">
        <div class="welcome-message">
          <h3><i class="fas fa-landmark"></i> Welcome to AI Local Culture Guide!</h3>
          <p>Explore the rich cultures of India with me! Ask about traditions, festivals, or etiquette in places like Delhi, Kerala, or Rajasthan.</p>
          <div class="suggested-questions">
            <button class="suggested-btn" onclick="insertQuestion(this)">
              <i class="fas fa-pray"></i> What are some customs in Tamil Nadu?
            </button>
            <button class="suggested-btn" onclick="insertQuestion(this)">
              <i class="fas fa-fire"></i> How is Holi celebrated in Uttar Pradesh?
            </button>
            <button class="suggested-btn" onclick="insertQuestion(this)">
              <i class="fas fa-utensils"></i> What’s a traditional dish from Punjab?
            </button>
            <button class="suggested-btn" onclick="insertQuestion(this)">
              <i class="fas fa-hands"></i> How should I greet elders in Kerala?
            </button>
          </div>
        </div>
      </div>
      <div class="chat-footer">
        <input type="text" id="userInput" placeholder="Ask about local culture..." autocomplete="off">
        <button id="sendButton" onclick="handleSend()">
          <i class="fas fa-paper-plane"></i>
        </button>
      </div>
    </div>
    <footer class="app-footer">
    </a>
    </footer>
    <div class="copy-success" id="copySuccess">
      <i class="fas fa-check-circle"></i> Copied to clipboard!
    </div>
  </div>

  <script>
    const chat = document.getElementById("chat");
    const input = document.getElementById("userInput");
    const sendButton = document.getElementById("sendButton");
    const copySuccess = document.getElementById("copySuccess");
    let isTyping = false;
  
    function insertQuestion(btn) {
      const question = btn.textContent.replace(/<i.*?<\/i>/g, "").trim();
      input.value = question;
      input.focus();
      console.log("Inserted question:", question); // Debug log
    }
  
    function getCurrentTime() {
      const now = new Date();
      return now.toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" });
    }
  
    function addMessage(text, sender) {
      if (isTyping && sender === "bot") {
        chat.removeChild(chat.lastChild);
        isTyping = false;
      }
  
      const msg = document.createElement("div");
      msg.className = `message ${sender}`;
  
      if (sender === "bot") {
        msg.innerHTML = `
          ${text.replace(/\n/g, "<br>")}
          <span class="message-time">${getCurrentTime()}</span>
          <div class="message-actions">
            <button class="message-action-btn" onclick="copyToClipboard(this.parentElement.parentElement)">
              <i class="fas fa-copy"></i>
            </button>
          </div>`;
      } else {
        msg.innerHTML = `
          ${text.replace(/\n/g, "<br>")}
          <span class="message-time">${getCurrentTime()}</span>`;
      }
  
      chat.appendChild(msg);
      chat.scrollTop = chat.scrollHeight;
    }
  
    function copyToClipboard(messageElement) {
      const textToCopy = messageElement.textContent.replace(/[\s\n]+/g, " ").trim();
      navigator.clipboard.writeText(textToCopy).then(() => {
        copySuccess.style.display = "block";
        setTimeout(() => {
          copySuccess.style.display = "none";
        }, 2500);
      });
    }
  
    function showTypingIndicator() {
      if (isTyping) return;
  
      const typing = document.createElement("div");
      typing.className = "typing-indicator";
      typing.innerHTML = `
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
      `;
      chat.appendChild(typing);
      chat.scrollTop = chat.scrollHeight;
      isTyping = true;
    }
  
    async function handleSend() {
      const message = input.value.trim();
      if (!message || isTyping) return;
  
      console.log("Sending message:", message); // Debug log
      addMessage(message, "user");
      input.value = "";
      sendButton.disabled = true;
      showTypingIndicator();
  
      const prompt = `You are an expert AI Local Culture Guide for India.
        Provide concise, accurate information (1-2 sentences max) about local traditions, festivals, etiquette, or cuisine across Indian states or cities.
        Focus on cultural insights and practical tips for travelers or curious learners.
        If asked unrelated questions, respond with "I specialize in Indian local culture. How can I help you explore it?"
  
        User question: ${message}`;
  
      try {
        // Replace with a valid API key or mock response for testing
        const response = await fetch(
          "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyCo4OlQyskN07hl3t-UuolDGx1XaA_-O7c",
          {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              contents: [{ parts: [{ text: prompt }] }],
            }),
          }
        );
  
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
  
        const data = await response.json();
        const reply =
          data?.candidates?.[0]?.content?.parts?.[0]?.text ||
          "I specialize in Indian local culture. How can I help you explore it?";
        addMessage(reply, "bot");
      } catch (error) {
        console.error("Error:", error); // Debug log
        addMessage("Sorry, I'm having trouble connecting. Please try again later.", "bot");
      } finally {
        sendButton.disabled = false;
      }
    }
  
    input.addEventListener("keypress", (e) => {
      if (e.key === "Enter" && !isTyping) handleSend();
    });
  
    sendButton.addEventListener("click", () => {
      console.log("Send button clicked"); // Debug log
      handleSend();
    });
  
    setTimeout(() => {
      addMessage(
        "Pro tip: When visiting a South Indian temple, wear modest clothing and remove your shoes before entering.",
        "bot"
      );
    }, 1500);
  </script>
</body>
</html>